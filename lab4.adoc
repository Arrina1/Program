:toc:
:toc-title: Оглавление
:figure-caption: Рисунок
:stem:
:sectnums:

= Лабораторная работа №4

Типы данных С++

== Задание

1. Написать код: при нажатии на кнопку загорается диод.
2. Описать типы переменных, преобразования, указатели, ссылки,операции с указателямии, что такое регистр.

== Код

Код представлен на рисунке 1-2.

.Начало кода
image::KOD.png[]

.Конец кода
image::KOD2.png[]

На рисунке 3-4 показана работа кода.

.Работа кода 1
image::work1.jpg[]
.Работа кода 2
image::work2.jpg[]

== Типы переменных

Типы данных подразделяют на три большие группы: 

* простые
* структуривровнанные
* адресные.

Под *простыми* типами данных будем понимать все те типы, которые могут содержать в себе числа или/и символы.

Простые так же можно рассматривать по следующим категориям:

* *целые* и *с плавающей запятой*
* *знаковые* и *беззнаковые*

*Структурированных* типов данных всего 3 -- массив, класс, объединение

*Адресных* типов данных различают 2:

* ссылка (reference)
* указатель (pointer)

.Типы данных
image::tip.dan.png[]

== Размеры типов данных

Размеры типов не четко определены и могут отличаться для различных микроконтроллеров. Для размеров типов существует правило:

[.source, cpp]
----
1             <= sizeof(char)     <= sizeof(short) <= sizeof(int) <= sizeof(long)
1             <= sizeof(bool)     <= sizeof(long)
sizeof(char)  <= sizeof(long)
sizeof(float) <= sizeof(double)   <= sizeof(long double)
sizeof(T)     == sizeof(signed T) == sizeof(unsigned T)
----

Следует явно указывать размер типа данных при создании переменной.

[.source, cpp]
----
uint32_t test; // явно int четырехбайтный
uint8_t test; // явно int двухбайтный
----

== Преобразование типов

Преобразование типов — изменение значения из одного типа в другой:

* Неявные (автоматические) — компилятор автоматически преобразует, например, int → float.
* Явные (кастинг) — программист явно указывает преобразование, например, (int) 3.14 → 3.
* Важно контролировать преобразования для предотвращения потерь данных или ошибок.

== Указатели
 
Указатель — переменная, хранящая адрес другой переменной в памяти.

* Объявление: int *p; — указатель на целое.
* Можно читать/записывать значение по адресу через оператор разыменования *p.
* Используются для динамического выделения памяти, работы с массивами, передачей данных по ссылке.

== Ссылки

Ссылка — альтернативное имя для уже существующей переменной.

* Объявление: int &ref = var;
* В отличие от указателя, ссылка должна быть инициализирована и не может указывать на NULL.
* Удобны для передачи аргументов в функции без копирования.

== Операции с указателями

* *p — разыменование (доступ к значению по адресу).
* &var — получение адреса переменной.
* Арифметика указателей: p++ — переход к следующему элементу памяти для данного типа.
* Сравнения указателей (например, p == q).

Операции требуют осторожности, чтобы не выйти за границы выделенной области памяти (чтобы избежать ошибок).

== Регистр

Регистры - это быстрая память внутри процессора. Они хранят данные, с которыми процессор работает прямо сейчас. Если представлять процессор как мозг компьютера, то регистры - это его кратковременная память.

Вот главные особенности регистров:

* Они очень маленькие по объему - обычно могут хранить 32 или 64 бита, то есть 4 или 8 байт (в нашем случае 4 байта);

* Регистры сразу доступны процессору, что дает сверхбыструю работу;

* Их число ограничено - в разных процессорах разное количество регистров.

Виды:

* *Регистры общего назначения* - сюда помещают данные или результаты вычислений;

* *Регистры специальных функций* - они управляют процессом работы процессора, например, текущее состояние, куда переходить дальше и т.п.

* *Регистры специального назначения* - регистры, имеющие свой адрес и имеющие отдельные поля, отвечающие за работу переферии (например, регистр CR, управляющий таймером, и его поле CEN, отвечающий за включение/выключение таймера).

Регистры - это рабочий стол процессора, где хранятся инструменты и материалы, с которыми процессор работает прямо сейчас.

== Заключение

Типы переменных, преобразования, указатели и ссылки — ключевые концепции в программировании, обеспечивающие эффективное управление данными и памятью. Понимание различных типов позволяет правильно хранить и обрабатывать информацию, а преобразования помогают безопасно менять форматы данных. Указатели дают прямой доступ к памяти и позволяют создавать гибкие структуры данных, тогда как ссылки упрощают работу с существующими переменными без дополнительной нагрузки. Знание операций с указателями важно для предотвращения ошибок и обеспечения безопасности программ. Регистр процессора — это быстрое хранилище, играющее важную роль в оптимизации выполнения инструкций. В совокупности эти темы образуют фундамент для написания эффективного и корректного кода.
